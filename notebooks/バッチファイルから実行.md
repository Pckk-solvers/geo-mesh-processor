# geo-mesh-processor の使い方（go.bat 実行版）

**対象リポジトリ**: Pckk-solvers/geo-mesh-processor — シェープファイルのメッシュ化をサポートするツール群。

> 本サンプルは **EXE 配布ではなく `go.bat` から実行**する想定です。

---

## 前提条件

* Windows 10/11（64bit）
* 通常の **Python** がインストール済み（python.org 版推奨）
* ネットワーク接続（初回のみ、ライブラリ取得のため）

> 注: QGIS/OSGeo4W 付属の Python では仮想環境が作れない場合があります。

---

## ダウンロードと配置

1. GitHub のリポジトリページから **ZIP をダウンロード**します。<img width="2560" height="1032" alt="スクリーンショット 2025-08-01 165816" src="https://github.com/user-attachments/assets/1475cb46-50db-4013-9080-44a194a9ac03" />
2. ZIP を **解凍**し、フォルダをユーザー配下へ配置します。

   * 例: `C:\Users\<ユーザー名>\Documents\geo-mesh-processor`

---

## 実行方法

* エクスプローラでフォルダを開き、**`go.bat` をダブルクリック**します。
* もしくは、アドレスバーに `cmd` と入力して開いた黒い画面で:

```bat
cmd /k go.bat
```

> 以降はこの `go.bat` を起動するだけで OK です。

---

## 実行時の処理フロー

### 初回実行

1. ローカルの Python を用いて **仮想環境 `.venv` を作成**
2. 仮想環境を **有効化**
3. **`requirements.txt` のライブラリをインストール**
4. アプリを **`python -m src.app2`** で起動

> 初回はライブラリのダウンロード・ビルドで**時間がかかります**。

### 2回目以降

1. 仮想環境を有効化
2. `requirements.txt` の変更を自動判定（**変更が無ければ `pip install` をスキップ**）
3. アプリを `python -m src.app2` で起動

---

## よくある質問 / トラブルシューティング

### 「Python が見つかりません」

* python.org 版の Python をインストールしてください。
* 確認コマンド:

```bat
py -3 --version
python --version
```

> QGIS 付属の Python では `venv` 作成に失敗することがあります。

### 「ウィンドウがすぐ閉じてエラーが読めない」

* エクスプローラのアドレスバーに `cmd` と入力して開いた画面で `go.bat` を実行してください。
* もしくは、以下のラッパーを `run_here.bat` として同じフォルダに保存して、そちらを実行します:

```bat
@echo off
start "geo-mesh-processor" cmd /k "%~dp0go.bat" %*
```

### 「依存関係を再インストールしたい」

* `go.bat --reinstall` を利用してください（`requirements.txt` に変更が無くても再インストールします）。

### 「セキュリティ警告でブロックされる」

* ZIP 展開直後にブロックされる場合は、展開フォルダで次を 1 回だけ実行してください（PowerShell）:

```powershell
Get-ChildItem -Recurse -File | Unblock-File
```

---

## ディレクトリ例

```
geo-mesh-processor/
├─ go.bat
├─ requirements.txt
├─ src/
│  ├─ app2.py      # メインモジュール（python -m src.app2）
│  └─ __init__.py
└─ ...
```

---

## 備考

* 初回実行は環境構築のため**時間がかかります**。2 回目以降は高速です。
* `requirements.txt` を変更した場合は、自動的に再インストールが走ります。
* 問題が解決しない場合は、表示された `[ERROR]` 行を添えて Issue でご連絡ください。
